{% extends "layout.html"%}

{% block title %}
User Profile
{% endblock %}

{% block main %}
<div class="space-y-6">
    <div class="bg-sky-200 w-1/6 h-[50vh] p-2 place-self-center rounded-full flex flex-col
        items-center justify-center">
        <img id="profilePreview"
            src="{{ user[0]['images'] if user[0]['images'] else '/static/images/profile_img.jpg' }}" alt="Profile Image"
            class="w-full h-full object-cover rounded-full border-1 border-white shadow-md cursor-pointer"
            onclick="document.getElementById('prImage').click()">
    </div>
    <button class="addSearchBtn" onclick="writeProfile()"><i class="fa-solid fa-user-pen"></i> Edit Profile
    </button>
    <div class="grid grid-cols-2 gap-2">
        <div>
            <span class="font-semibold text-lg">Basic Information</span>
        </div>
        <div>
            <form action="/profile" method="post" enctype="multipart/form-data">
                <div class="mb-3">
                    <input type="file" id="prImage" name="prImage" accept="image/*" class="hidden"
                        onchange="previewImage(event)">
                </div>
                <div class="mb-3 flex flex-row gap-2">
                    <span class="font-semibold text-md text-justify basis-1/4 mt-2">Username: </span>
                    <input autocomplete="off" class="inputBox basis-3/4" name="prUsername" id="prUsername" placeholder="Username"
                        type="text" value="{{ user[0]['username'] }}" required readonly>
                </div>
                <div class="mb-3 flex flex-row gap-2">
                    <span class="font-semibold text-md text-justify basis-1/4 mt-2">Email: </span>
                    <input autocomplete="off" class="inputBox basis-3/4" name="prEmail" placeholder="Email" type="text"
                        value="{{ user[0]['email'] if user[0]['email'] else '' }}" id="prEmail" required readonly>
                </div>
                <div class="mb-3 flex flex-row gap-2">
                    <span class="font-semibold text-md text-justify basis-1/4 mt-2">Contact No: </span>
                    <input autocomplete="off" class="inputBox basis-3/4" name="prContact_no" id="prContact_no"
                        placeholder="Contact No" type="text"
                        value="{{ user[0]['contact_no'] if user[0]['contact_no'] else '' }}" required readonly>
                </div>
                <div class="mb-3 flex flex-row gap-2">
                    <span class="font-semibold text-md text-justify basis-1/4 mt-2">Joined Date: </span>
                    <input autocomplete="off" class="inputBox basis-3/4" name="join_date" placeholder="Joined Date" type="date"
                        value="{{ user[0]['joined_date'] }}" required readonly>
                </div>
                <button class="saveUpdateBtn" type="submit" id="saveBtn" onclick="saveData()" hidden><i
                        class="fa-solid fa-user-pen"></i> Save</button>
            </form>
        </div>
    </div>

    <div class="grid grid-cols-2 gap-4">
        <div>
            <span class="font-semibold text-lg">Finacial Information</span>
        </div>
        <div>
            <div class="mb-3 flex flex-row gap-2">
                <span class="font-semibold text-md text-justify basis-1/4 mt-2">Cash: </span>
                <input autocomplete="off" class="inputBox basis-3/4" type="text" value="{{ user[0]['cash'] }}" required readonly>
            </div>
            <div class="mb-3 flex flex-row gap-2">
                <span class="font-semibold text-md text-justify basis-1/4 mt-2">Income Summary <span class="text-sm font-light">(This year) </span>:</span>
                <input autocomplete="off" class="inputBox basis-3/4" type="text" value="{{ income[0]['sum(amount)'] }}" required
                    readonly>
            </div>
            <div class="mb-3 flex flex-row gap-2">
                <span class="font-semibold text-md text-justify basis-1/4 mt-2">Expense Summary <span class="text-sm font-light">(This year) </span>:</span>
                <input autocomplete="off" class="inputBox basis-3/4" type="text" value="{{ expense[0]['sum(amount)'] }}" required
                    readonly>
            </div>
        </div>
    </div>
    <button class="addSearchBtn" onclick="writePassword()"><i class="fa-solid fa-key"></i> Change Password
    </button>
    <div class="grid grid-cols-2 gap-4" id="password_div" hidden>
        <div>
            <span class="font-semibold text-lg">Security Preference</span>
        </div>
        <div>
            <form action="/passwordReset" method="post">
                <div class="mb-3 flex flex-row gap-2">
                    <span class="font-semibold text-md text-justify basis-1/4 mt-2">Curent Password: </span>
                    <input autocomplete="off" class="inputBox basis-3/4" name="curr" id="curr" placeholder="Curent Password"
                        type="password" required>
                </div>
                <div class="mb-3 flex flex-row gap-2">
                    <span class="font-semibold text-md text-justify basis-1/4 mt-2">New Password: </span>
                    <input autocomplete="off" class="inputBox basis-3/4" name="newPass" id="newPass" placeholder="New Password"
                        type="password" required>
                </div>
                <div class="mb-3 flex flex-row gap-2">
                    <span class="font-semibold text-md text-justify basis-1/4 mt-2">Confirm New Password: </span>
                    <input autocomplete="off" class="inputBox basis-3/4" name="newCon" id="newCon"
                        placeholder="Confirm New Password" type="password" required>
                </div>
                <button class="saveUpdateBtn" type="submit">
                    <i class="fa-solid fa-user-lock"></i> Change Password</button>
            </form>
        </div>
    </div>
</div>

{% endblock %}
